stages:
  detect:
    cmd: python detect.py ${detect}
    deps:
    - detect.py
    - ${detect.weights}
    outs:
    - runs/detect/bus.jpg
    - runs/detect/zidane.jpg
  export:
    cmd: python models/export.py ${export}
    deps:
    - models/export.py
    - ${export.weights}
  test:
    cmd: python test.py ${test}
    deps:
    - test.py
    - ${test.weights}
    outs:
    - runs/test
  train:
    cmd: python train.py ${train}
    deps:
    - train.py
    metrics:
    - runs/train/results.txt:
        cache: false
    - runs/train/hyp.yaml:
        cache: false
    outs:
    - runs/train/weights/last.pt
    - runs/train/weights/best.pt
    - runs/train/labels_correlogram.jpg
    - runs/train/labels.jpg
    - runs/train/train_batch0.jpg
    - runs/train/confusion_matrix.png
    - runs/train/results.png
